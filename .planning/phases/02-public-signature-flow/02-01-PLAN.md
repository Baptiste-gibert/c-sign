---
phase: 02-public-signature-flow
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/package.json
  - frontend/tsconfig.json
  - frontend/tsconfig.app.json
  - frontend/tsconfig.node.json
  - frontend/vite.config.ts
  - frontend/index.html
  - frontend/src/main.tsx
  - frontend/src/App.tsx
  - frontend/src/index.css
  - frontend/src/lib/utils.ts
  - frontend/src/vite-env.d.ts
  - frontend/components.json
autonomous: true

must_haves:
  truths:
    - "Vite dev server starts on port 5173 without errors"
    - "Tailwind CSS v4 utility classes render correctly in browser"
    - "React Router navigates between routes without page reload"
    - "API proxy forwards /api/* requests to localhost:3000"
  artifacts:
    - path: "frontend/package.json"
      provides: "All frontend dependencies"
      contains: "react-router-dom"
    - path: "frontend/vite.config.ts"
      provides: "Vite config with Tailwind v4 plugin and API proxy"
      contains: "@tailwindcss/vite"
    - path: "frontend/src/main.tsx"
      provides: "React 19 app entry with React Router"
      contains: "BrowserRouter"
    - path: "frontend/src/index.css"
      provides: "Tailwind v4 base import"
      contains: "@import"
    - path: "frontend/src/lib/utils.ts"
      provides: "cn() utility for shadcn/ui"
      contains: "twMerge"
  key_links:
    - from: "frontend/vite.config.ts"
      to: "backend API"
      via: "proxy config"
      pattern: "proxy.*api.*3000"
    - from: "frontend/src/main.tsx"
      to: "frontend/src/App.tsx"
      via: "React Router BrowserRouter"
      pattern: "BrowserRouter"
---

<objective>
Scaffold the Vite + React 19 frontend with Tailwind CSS v4, shadcn/ui components, React Router, and API proxy to the Payload backend.

Purpose: This is the first frontend work in the project. All subsequent Phase 2 plans (signing page, form, canvas) depend on this scaffold existing. Must be done first and verified working before any UI work begins.

Output: A working Vite dev server at :5173 with Tailwind styling, React Router, shadcn/ui base components, and /api/* proxy to Payload backend at :3000.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-public-signature-flow/02-RESEARCH.md
@CLAUDE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Vite + React 19 project with Tailwind v4 and dependencies</name>
  <files>
    frontend/package.json
    frontend/tsconfig.json
    frontend/tsconfig.app.json
    frontend/tsconfig.node.json
    frontend/vite.config.ts
    frontend/index.html
    frontend/src/main.tsx
    frontend/src/App.tsx
    frontend/src/index.css
    frontend/src/vite-env.d.ts
  </files>
  <action>
    1. Remove any existing node_modules in /workspace/frontend (root-owned, will cause permission issues).

    2. Initialize Vite project in /workspace/frontend using the react-ts template:
       ```bash
       cd /workspace/frontend && npm create vite@latest . -- --template react-ts
       ```
       If the directory is not empty, clear it first or use appropriate flags.

    3. Install all dependencies in one batch:
       ```bash
       cd /workspace/frontend && npm install

       # Core routing and data
       npm install react-router-dom @tanstack/react-query

       # Forms and validation
       npm install react-hook-form @hookform/resolvers zod

       # Signature and QR
       npm install react-signature-canvas signature_pad qrcode.react

       # Tailwind CSS v4 (Vite plugin, NOT PostCSS)
       npm install tailwindcss @tailwindcss/vite

       # shadcn/ui dependencies
       npm install class-variance-authority clsx tailwind-merge
       npm install @radix-ui/react-dialog @radix-ui/react-label @radix-ui/react-select @radix-ui/react-slot
       npm install lucide-react

       # Type definitions
       npm install -D @types/react-signature-canvas
       ```

    4. Configure vite.config.ts:
       - Import and add `tailwindcss()` from `@tailwindcss/vite` to plugins array (AFTER react plugin)
       - Add path alias: `'@': path.resolve(__dirname, './src')`
       - Add server.port: 5173
       - Add server.proxy: `'/api': { target: 'http://localhost:3000', changeOrigin: true }`
       - Import `path` from 'path'

    5. Configure tsconfig.json with paths for @ alias:
       ```json
       "baseUrl": ".",
       "paths": { "@/*": ["./src/*"] }
       ```
       Make sure the tsconfig.app.json also has these paths configured.

    6. Update frontend/src/index.css to use Tailwind v4 syntax:
       ```css
       @import "tailwindcss";
       ```
       Remove any default Vite CSS content.

    7. Update frontend/src/main.tsx:
       - Import BrowserRouter from react-router-dom
       - Wrap App in BrowserRouter
       - Import './index.css'
       - Use React 19 createRoot pattern

    8. Create frontend/src/App.tsx with a basic Routes setup:
       - Import Routes, Route from react-router-dom
       - Add placeholder route for "/" showing a simple "c-sign" heading
       - Add placeholder route for "/sign/:dayId" (will be implemented in Plan 03)
       - Add placeholder route for "/success" (will be implemented in Plan 03)

    9. Create frontend/src/lib/utils.ts with the cn() helper:
       ```typescript
       import { type ClassValue, clsx } from "clsx"
       import { twMerge } from "tailwind-merge"

       export function cn(...inputs: ClassValue[]) {
         return twMerge(clsx(inputs))
       }
       ```

    10. Delete default Vite boilerplate files that are not needed: src/App.css, src/assets/ (if empty/default).
  </action>
  <verify>
    Run `cd /workspace/frontend && npx tsc --noEmit` to verify TypeScript compilation passes.
    Run `cd /workspace/frontend && npx vite build` to verify production build succeeds.
    Verify key files exist: package.json, vite.config.ts, src/main.tsx, src/App.tsx, src/index.css, src/lib/utils.ts.
  </verify>
  <done>
    Vite project compiles without TypeScript errors. Production build succeeds. All dependencies installed (react-router-dom, react-hook-form, zod, react-signature-canvas, qrcode.react, tailwindcss, shadcn/ui primitives).
  </done>
</task>

<task type="auto">
  <name>Task 2: Initialize shadcn/ui and add base components</name>
  <files>
    frontend/components.json
    frontend/src/components/ui/button.tsx
    frontend/src/components/ui/card.tsx
    frontend/src/components/ui/input.tsx
    frontend/src/components/ui/label.tsx
    frontend/src/components/ui/select.tsx
    frontend/src/components/ui/checkbox.tsx
  </files>
  <action>
    1. Initialize shadcn/ui in the frontend directory:
       ```bash
       cd /workspace/frontend && npx shadcn@latest init
       ```
       When prompted, select:
       - Style: New York
       - Base color: Neutral
       - CSS variables: yes
       Use `--defaults` flag if available to skip prompts, or use `-y` flag.

       If shadcn init fails with Tailwind v4, manually create components.json:
       ```json
       {
         "$schema": "https://ui.shadcn.com/schema.json",
         "style": "new-york",
         "rsc": false,
         "tsx": true,
         "tailwind": {
           "config": "",
           "css": "src/index.css",
           "baseColor": "neutral",
           "cssVariables": true
         },
         "aliases": {
           "components": "@/components",
           "utils": "@/lib/utils",
           "ui": "@/components/ui",
           "lib": "@/lib",
           "hooks": "@/hooks"
         },
         "iconLibrary": "lucide"
       }
       ```

    2. Add required shadcn/ui components:
       ```bash
       cd /workspace/frontend
       npx shadcn@latest add button card input label select checkbox
       ```
       These are the components needed for the signing form (Plan 03).
       If the CLI has issues, manually copy component files from shadcn/ui registry.

    3. Verify the components.json and all component files were created correctly.

    4. Run a build to confirm shadcn/ui components compile:
       ```bash
       cd /workspace/frontend && npx tsc --noEmit
       ```
  </action>
  <verify>
    Verify components.json exists at frontend/components.json.
    Verify at least button.tsx, input.tsx, label.tsx, select.tsx, checkbox.tsx exist in frontend/src/components/ui/.
    Run `cd /workspace/frontend && npx vite build` to verify everything compiles together.
  </verify>
  <done>
    shadcn/ui initialized with components.json. Button, Card, Input, Label, Select, Checkbox components available in frontend/src/components/ui/. Full project builds successfully.
  </done>
</task>

</tasks>

<verification>
1. `cd /workspace/frontend && npx tsc --noEmit` passes with zero errors
2. `cd /workspace/frontend && npx vite build` produces dist/ output
3. frontend/package.json contains: react-router-dom, react-hook-form, zod, react-signature-canvas, qrcode.react, tailwindcss, @tailwindcss/vite
4. frontend/vite.config.ts has proxy config for /api -> localhost:3000
5. frontend/src/index.css contains `@import "tailwindcss"`
6. frontend/src/components/ui/ contains at least 5 shadcn component files
</verification>

<success_criteria>
- Vite dev server would start on port 5173 (do not start it, just verify build works)
- TypeScript compilation passes
- All Phase 2 dependencies are installed
- shadcn/ui components are available for use
- React Router routes are configured for /, /sign/:dayId, /success
- API proxy is configured for /api/* -> backend
</success_criteria>

<output>
After completion, create `.planning/phases/02-public-signature-flow/02-01-SUMMARY.md`
</output>
