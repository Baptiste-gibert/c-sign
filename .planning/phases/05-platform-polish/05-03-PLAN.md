---
phase: 05-platform-polish
plan: 03
type: execute
wave: 3
depends_on: ["05-02"]
files_modified:
  - frontend/src/pages/SignPage.tsx
  - frontend/src/pages/LoginPage.tsx
  - frontend/src/pages/DashboardPage.tsx
  - frontend/src/pages/EventDetailPage.tsx
  - frontend/src/pages/EventCreatePage.tsx
  - frontend/src/components/SignatureCanvas.tsx
  - frontend/src/components/ParticipantForm.tsx
  - frontend/src/components/OrganizerLayout.tsx
  - frontend/src/components/EventForm.tsx
  - frontend/src/components/ParticipantSearch.tsx
  - frontend/src/components/ParticipantTable.tsx
  - frontend/src/components/AttendanceDashboard.tsx
autonomous: false

must_haves:
  truths:
    - "Public signing form is fully usable on smartphone screens (320px width minimum)"
    - "Organizer dashboard is fully usable on tablet and desktop screens"
    - "Signature canvas works reliably on mobile browsers"
    - "Language toggle works and persists across reload"
    - "All UI text displays correctly in both French and English"
  artifacts:
    - path: "frontend/src/components/SignatureCanvas.tsx"
      provides: "Responsive signature canvas with h-40 sm:h-48 md:h-56"
      contains: "h-40 sm:h-48"
    - path: "frontend/src/pages/SignPage.tsx"
      provides: "Mobile-optimized public signing page"
      contains: "px-4"
    - path: "frontend/src/components/OrganizerLayout.tsx"
      provides: "Responsive organizer layout with mobile navigation"
      contains: "md:"
  key_links:
    - from: "frontend/src/components/SignatureCanvas.tsx"
      to: "Browser touch events"
      via: "react-signature-canvas touch-none class"
      pattern: "touch-none"
    - from: "frontend/src/pages/EventDetailPage.tsx"
      to: "Tailwind responsive grid"
      via: "grid-cols-1 md:grid-cols-2"
      pattern: "grid-cols-1"
---

<objective>
Audit and update all components for mobile-first responsive design, then perform a comprehensive human verification of the complete bilingual + responsive experience.

Purpose: Deliver PLAT-01 requirement — all UI is mobile-first responsive across smartphones, tablets, and desktops. Combined with PLAT-03 verification.
Output: Responsive, bilingual application verified by human on real screens.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-platform-polish/05-02-SUMMARY.md
@.planning/phases/05-platform-polish/05-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Mobile-first responsive audit and updates</name>
  <files>
    frontend/src/pages/SignPage.tsx
    frontend/src/pages/LoginPage.tsx
    frontend/src/pages/DashboardPage.tsx
    frontend/src/pages/EventDetailPage.tsx
    frontend/src/pages/EventCreatePage.tsx
    frontend/src/pages/SuccessPage.tsx
    frontend/src/components/SignatureCanvas.tsx
    frontend/src/components/ParticipantForm.tsx
    frontend/src/components/OrganizerLayout.tsx
    frontend/src/components/EventForm.tsx
    frontend/src/components/ParticipantSearch.tsx
    frontend/src/components/ParticipantTable.tsx
    frontend/src/components/AttendanceDashboard.tsx
  </files>
  <action>
Systematic responsive audit of every component. Use Tailwind v4 mobile-first approach: unprefixed = mobile, sm: = 640px+, md: = 768px+, lg: = 1024px+.

**Priority 1: Public Signing Flow (smartphone-first, 320px minimum)**

1. **SignPage.tsx** — Already has `max-w-lg mx-auto px-4 py-6` which is good for mobile. Verify:
   - Container: `px-3 sm:px-4 py-4 sm:py-6` (tighter padding on small screens)
   - Session radio buttons: ensure touch targets are at least 44px (add `min-h-[44px]` to labels)
   - Event title: `text-xl sm:text-2xl` (smaller on mobile)

2. **ParticipantForm.tsx** — Already has `min-h-[44px]` on inputs (good). Verify:
   - Form fits in 320px width: all inputs are full-width (they are: no grid layout)
   - Select dropdowns: ensure SelectTrigger has `min-h-[44px]` (already present)
   - Checkbox label: text wraps properly on small screens
   - Submit button: `w-full min-h-[44px]` (already present, good)

3. **SignatureCanvas.tsx** — Update:
   - Change `h-48` to `h-40 sm:h-48 md:h-56` for responsive height
   - Canvas container already has `w-full` (good)
   - Ensure clear button is easily tappable: add `min-h-[36px]` if not already large enough

4. **SuccessPage.tsx** — Already mobile-friendly with `max-w-lg mx-auto px-4`. Verify padding.

**Priority 2: Organizer Layout (tablet/desktop-first, but must not break on mobile)**

5. **OrganizerLayout.tsx** — Current layout has horizontal nav that may overflow on mobile:
   - Header: On mobile, stack logo and nav vertically or use a hamburger menu. Simplest approach for MVP: hide nav links on mobile, show on sm:. Add a mobile-friendly layout:
     - Logo row: always visible with LanguageSwitcher and logout
     - Nav row: `hidden sm:flex` for nav links, or show as a simpler mobile nav below header
   - Alternative simpler approach: Keep horizontal layout but allow wrapping. Use `flex-wrap gap-2` on the header content.
   - **Decision: Use flex-wrap approach** — simpler, no hamburger menu complexity for MVP. On very small screens, items wrap to second line.
   - Update: `flex items-center justify-between` → `flex flex-wrap items-center justify-between gap-2`
   - Nav links: add `text-xs sm:text-sm` for smaller text on mobile
   - Main content padding: `p-3 sm:p-6` (less padding on mobile)

6. **DashboardPage.tsx** — Table layout may overflow on mobile:
   - For mobile: hide less important columns. Use `hidden md:table-cell` on "Lieu", "Type de depense" columns
   - Keep visible on all screens: Titre, Statut, Actions
   - Keep Dates visible as it's important
   - Add `overflow-x-auto` wrapper around table for safety
   - Header: `text-2xl sm:text-3xl` for title

7. **EventCreatePage.tsx** — Already decent layout. Verify:
   - Title: `text-2xl sm:text-3xl`
   - Error message: ensure it wraps properly

8. **EventForm.tsx** — Already has `max-w-2xl space-y-6`:
   - Verify all inputs are full-width on mobile
   - DateSelector calendar: ensure it's centered and doesn't overflow

9. **EventDetailPage.tsx** — Complex page, needs most work:
   - Header section: Stack title and badge vertically on mobile instead of side-by-side. Use `flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4`
   - Metadata line (location, organizer, expense type): `flex flex-wrap items-center gap-2 sm:gap-4` to wrap on mobile
   - QR code grid: Already `grid gap-4 md:grid-cols-2 lg:grid-cols-3` — add explicit `grid-cols-1` base: `grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3`
   - Walk-in form grid: Current `grid grid-cols-2 gap-3` — change to `grid grid-cols-1 sm:grid-cols-2 gap-3` (stack on mobile)
   - Status controls buttons: `flex flex-col sm:flex-row items-stretch sm:items-center gap-3`
   - Card padding: ensure it's adequate but not excessive on mobile

10. **ParticipantSearch.tsx** — Popover width:
    - Change `w-[400px]` to `w-[calc(100vw-2rem)] sm:w-[400px]` or use `w-full max-w-[400px]` for mobile
    - Search results: ensure they're scrollable if many results

11. **ParticipantTable.tsx** — Table overflow on mobile:
    - Wrap table in `overflow-x-auto` div
    - Hide less-important columns on mobile: "Email" and "N° d'inscription" with `hidden md:table-cell`
    - Keep visible: Nom, Prénom, Type, Actions

12. **AttendanceDashboard.tsx** — Already mostly fine. Verify:
    - Session cards stack properly on mobile
    - Progress bar and participant list are mobile-friendly
    - Signature entries: ensure text wraps properly

13. **LoginPage.tsx** — Already has `max-w-md` and `px-4` which is mobile-friendly. Verify:
    - Card doesn't overflow 320px width
    - Title: `text-3xl sm:text-4xl`
  </action>
  <verify>
    - `cd /workspace/frontend && npx tsc --noEmit` passes
    - `grep -rn "h-40 sm:h-48" frontend/src/components/SignatureCanvas.tsx` returns match (responsive canvas)
    - `grep -rn "hidden md:table-cell" frontend/src/pages/DashboardPage.tsx` returns matches (responsive table)
    - `grep -rn "grid-cols-1" frontend/src/pages/EventDetailPage.tsx` returns matches (responsive grid)
  </verify>
  <done>
    All components use mobile-first responsive Tailwind classes. Public flow optimized for 320px+ smartphones. Organizer flow usable on tablet and desktop with graceful mobile fallback. Tables have overflow handling and column hiding. Signature canvas has responsive height.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Human verification of bilingual + responsive experience</name>
  <files>none (verification only)</files>
  <action>
    Human verification of the complete Phase 5 bilingual and responsive implementation. No code changes — just testing the end-to-end experience across languages and screen sizes.
  </action>
  <verify>
    Prerequisites: Both backend and frontend must be running (`cd /workspace/backend && npm run dev` and `cd /workspace/frontend && npm run dev`).

    **Test 1: Language Switching (Desktop)**
    1. Visit http://localhost:5173/login
    2. Verify all text is in French by default
    3. Log in as organizer
    4. Find the LanguageSwitcher button in the header (should show "EN")
    5. Click it — ALL text should switch to English instantly (navigation, page title, buttons, table headers)
    6. Refresh the page — language should still be English (localStorage persistence)
    7. Click the switcher again — should return to French
    8. Navigate through: Dashboard → Event Detail → Event Create — verify all pages show correct language

    **Test 2: Public Flow Language (Desktop)**
    1. Visit http://localhost:5173/sign/{dayId} (use a day ID from an open event)
    2. Verify form labels are in French by default
    3. Find the LanguageSwitcher and switch to English
    4. All labels (Last name, First name, Email, City, etc.), placeholder text, and the signature canvas placeholder should be in English
    5. Switch back to French — everything returns to French

    **Test 3: Mobile Responsive - Public Flow (DevTools)**
    1. Open Chrome DevTools → Toggle Device Toolbar (Ctrl+Shift+M)
    2. Select iPhone SE (375x667) or set custom 320px width
    3. Visit http://localhost:5173/sign/{dayId}
    4. Verify: Form fits entirely within screen, no horizontal scroll
    5. All inputs have adequate touch target size (44px minimum height)
    6. Signature canvas is visible and appropriately sized
    7. Submit button is full-width and easily tappable
    8. Try different phone sizes: iPhone 12/13 (390px), Galaxy S21 (360px)

    **Test 4: Mobile Responsive - Organizer Flow (DevTools)**
    1. Set DevTools to iPad (768px width)
    2. Visit http://localhost:5173/login → log in
    3. Dashboard: Table should show most columns, no horizontal overflow
    4. Set to iPhone (375px): Table should hide less-important columns, remaining content readable
    5. Event Detail page: Cards should stack vertically, QR codes in single column
    6. Walk-in form fields should stack on mobile (1 column, not 2)
    7. Navigation header should remain usable (may wrap but not overflow)

    **Test 5: Signature Canvas Mobile**
    1. In DevTools mobile mode (375px), visit sign page
    2. Canvas should be shorter than desktop (h-40 = 160px vs h-48 = 192px)
    3. Use mouse to simulate drawing — canvas should respond
    4. Clear button should work
    5. If possible, test on a real phone by accessing via local network IP

    **Expected behavior:**
    - Language switches instantly with no page reload
    - Language persists across navigation and page refresh
    - No hardcoded French visible when English is selected
    - No horizontal scrolling on any page at 320px width
    - All interactive elements (buttons, inputs, links) are easily tappable on mobile
    - Signature canvas adapts to screen size
  </verify>
  <done>
    Human confirms: (1) language toggle works with FR/EN and persists, (2) all UI text displays correctly in both languages, (3) public signing form usable on 320px+ screens, (4) organizer dashboard usable on tablet/desktop, (5) signature canvas functional on mobile
  </done>
</task>

</tasks>

<verification>
1. Mobile responsive: No horizontal scroll at 320px on public pages
2. Bilingual: LanguageSwitcher toggles all visible text between FR and EN
3. Persistence: Language choice survives page reload
4. Signature canvas: Responsive height, functional on mobile
5. Tables: Graceful column hiding on small screens
</verification>

<success_criteria>
- Human verifier confirms: language toggle works with persistence
- Human verifier confirms: all UI text in both languages is correct
- Human verifier confirms: public flow works on 320px width
- Human verifier confirms: organizer flow works on tablet/desktop
- Human verifier confirms: signature canvas is functional on mobile
</success_criteria>

<output>
After completion, create `.planning/phases/05-platform-polish/05-03-SUMMARY.md`
</output>
