---
phase: 05-platform-polish
plan: 02
type: execute
wave: 2
depends_on: ["05-01"]
files_modified:
  - frontend/src/pages/SignPage.tsx
  - frontend/src/pages/SuccessPage.tsx
  - frontend/src/pages/LoginPage.tsx
  - frontend/src/pages/DashboardPage.tsx
  - frontend/src/pages/EventCreatePage.tsx
  - frontend/src/pages/EventDetailPage.tsx
  - frontend/src/components/SignatureCanvas.tsx
  - frontend/src/components/ParticipantForm.tsx
  - frontend/src/components/OrganizerLayout.tsx
  - frontend/src/components/EventForm.tsx
  - frontend/src/components/DateSelector.tsx
  - frontend/src/components/ParticipantSearch.tsx
  - frontend/src/components/ParticipantTable.tsx
  - frontend/src/components/AttendanceDashboard.tsx
  - frontend/src/lib/schemas.ts
autonomous: true

must_haves:
  truths:
    - "All UI text displays in selected language (no hardcoded French strings remain in JSX)"
    - "Switching language updates every visible string without page reload"
    - "Validation error messages display in selected language"
    - "Date formatting uses locale matching selected language"
  artifacts:
    - path: "frontend/src/pages/SignPage.tsx"
      provides: "Bilingual public signing page"
      contains: "useTranslation"
    - path: "frontend/src/pages/DashboardPage.tsx"
      provides: "Bilingual dashboard with translated table headers and status labels"
      contains: "useTranslation"
    - path: "frontend/src/pages/EventDetailPage.tsx"
      provides: "Bilingual event detail with translated status controls and participant management"
      contains: "useTranslation"
    - path: "frontend/src/lib/schemas.ts"
      provides: "Bilingual validation messages via i18n.t()"
      contains: "i18n.t"
  key_links:
    - from: "frontend/src/components/ParticipantForm.tsx"
      to: "frontend/src/i18n/locales/*/public.json"
      via: "useTranslation('public')"
      pattern: "useTranslation.*public"
    - from: "frontend/src/pages/DashboardPage.tsx"
      to: "frontend/src/i18n/locales/*/organizer.json"
      via: "useTranslation('organizer')"
      pattern: "useTranslation.*organizer"
    - from: "frontend/src/lib/schemas.ts"
      to: "frontend/src/i18n/index.ts"
      via: "import i18n for validation messages"
      pattern: "import i18n"
---

<objective>
Replace ALL hardcoded French strings across every frontend component with react-i18next t() calls. This is a systematic sweep of every page and component to make the entire UI bilingual.

Purpose: Deliver PLAT-03 requirement — all UI text displays in the user's selected language.
Output: Every user-facing string in the app comes from translation files.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-platform-polish/05-01-SUMMARY.md
@.planning/phases/05-platform-polish/05-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace strings in public flow components</name>
  <files>
    frontend/src/pages/SignPage.tsx
    frontend/src/pages/SuccessPage.tsx
    frontend/src/components/SignatureCanvas.tsx
    frontend/src/components/ParticipantForm.tsx
    frontend/src/lib/schemas.ts
  </files>
  <action>
These components form the public signing flow — the most critical path for mobile users.

1. **SignPage.tsx** — Add `const { t } = useTranslation('public')` and replace:
   - "Chargement..." → t('common:loading')
   - "Erreur de chargement" → t('common:loadError')
   - "Aucune session configurée pour cette journée" → t('noSessionsConfigured')
   - "Veuillez sélectionner une session" → t('selectSessionRequired')
   - "Sélectionnez la session *" → t('selectSession')
   - "Cet evenement est finalise..." → t('eventFinalized')
   - "Cet evenement n'est pas encore ouvert..." → t('eventNotOpen')
   - Date formatting: use a locale-switching helper. Import i18n and use `i18n.language === 'en' ? enUS : fr` from date-fns/locale for `toLocaleDateString`. Or use `day.date` with `toLocaleDateString(i18n.language === 'en' ? 'en-US' : 'fr-FR', ...)`.

2. **SuccessPage.tsx** — Add `const { t } = useTranslation('public')` and replace:
   - "Merci {{name}} !" → t('thankYou', { name: participantName })
   - "Signature enregistrée !" → t('signatureRecorded')
   - "Votre signature a été enregistrée avec succès." → t('signatureSuccess')

3. **SignatureCanvas.tsx** — Add `const { t } = useTranslation('public')` and replace:
   - "Signez ici" → t('signHere')
   - "Effacer" → t('clear')

4. **ParticipantForm.tsx** — Add `const { t } = useTranslation('public')` and replace:
   - "Feuille de présence" → t('attendanceSheet')
   - All field labels: "Nom *" → t('common:lastName') + ' *', etc.
   - "Numéro d'inscription professionnelle" → t('professionalNumber')
   - "Si applicable (vétérinaires, pharmaciens)" → t('professionalNumberHint')
   - "Type de bénéficiaire *" → t('common:beneficiaryType') + ' *'
   - "Sélectionner..." → t('common:select')
   - Beneficiary type options: use t('common:beneficiaryTypes.asv'), etc.
   - "Préciser le type *" → t('specifyType')
   - "Signature *" → t('signature')
   - "La signature est requise" → t('signatureRequired')
   - "Erreur lors de la capture de la signature" → t('signatureCaptureError')
   - "J'autorise l'utilisation de photos..." → t('imageRightsConsent')
   - "Envoi en cours..." / "Signer" → t('submitting') / t('sign')

5. **schemas.ts** — Validation messages must be dynamic (i18n language can change at runtime). Import the i18n instance directly (`import i18n from '@/i18n'`) and use `i18n.t()` for validation messages:
   - Change Zod schema definitions to use function messages: `.min(1, { message: i18n.t('validation.lastNameRequired') })`
   - NOTE: Since Zod schemas are evaluated once at import time but i18n.t() reads from the current language at call time, this works for reactive language switching because Zod's message functions are called at validation time, not at schema definition time. Use the callback pattern for .min(): `.min(1, () => i18n.t('validation.lastNameRequired'))` — Zod v3.23+ supports function messages.
   - If Zod version does not support function messages, use plain i18n.t() calls — the messages will be in the current language at validation time since schemas re-evaluate on each form submit.
  </action>
  <verify>
    - `cd /workspace/frontend && npx tsc --noEmit` passes
    - `grep -rn '"Signez ici"\|"Effacer"\|"Chargement"\|"La signature est requise"\|"Feuille de présence"\|"Signer"\|"Envoi en cours"' frontend/src/` returns no matches (all strings replaced)
  </verify>
  <done>
    All public flow components use t() for every user-facing string. Zero hardcoded French strings remain in SignPage, SuccessPage, SignatureCanvas, ParticipantForm, and schemas.ts.
  </done>
</task>

<task type="auto">
  <name>Task 2: Replace strings in organizer flow components</name>
  <files>
    frontend/src/pages/LoginPage.tsx
    frontend/src/pages/DashboardPage.tsx
    frontend/src/pages/EventCreatePage.tsx
    frontend/src/pages/EventDetailPage.tsx
    frontend/src/components/OrganizerLayout.tsx
    frontend/src/components/EventForm.tsx
    frontend/src/components/DateSelector.tsx
    frontend/src/components/ParticipantSearch.tsx
    frontend/src/components/ParticipantTable.tsx
    frontend/src/components/AttendanceDashboard.tsx
  </files>
  <action>
Systematic replacement across all organizer components. Each component gets `const { t } = useTranslation('organizer')` (or multi-namespace where needed).

1. **LoginPage.tsx** — `useTranslation('organizer')`:
   - "c-sign" stays as brand name (not translated)
   - "Connectez-vous pour gérer vos événements" → t('loginSubtitle')
   - "Connexion" (card title) → t('login')
   - "Entrez vos identifiants..." → t('loginDescription')
   - "Email" → t('common:email')
   - "Mot de passe" → t('password')
   - "Email ou mot de passe incorrect" → t('loginError')
   - "Se connecter" / "Connexion..." → t('signIn') / t('signingIn')
   - Zod validation in this file: "Email invalide" → i18n.t('common:validation.invalidEmail'), "Mot de passe requis" → i18n.t('validation.passwordRequired')

2. **OrganizerLayout.tsx** — `useTranslation('organizer')`:
   - "Événements" → t('events')
   - "Nouvel événement" → t('newEvent')
   - "Déconnexion" → t('logout')

3. **DashboardPage.tsx** — `useTranslation('organizer')`:
   - "Mes evenements" → t('myEvents')
   - "Nouvel evenement" → t('newEvent')
   - "Aucun evenement" → t('noEvents')
   - "Creez votre premier evenement" → t('createFirstEvent')
   - Table headers: "Titre" → t('title'), "Lieu" → t('location'), "Dates" → t('dates'), "Type de depense" → t('expenseType'), "Statut" → t('status'), "Actions" → t('actions')
   - "Voir" → t('view')
   - StatusBadge labels: use t('common:statuses.draft'), t('common:statuses.open'), t('common:statuses.finalized')
   - EXPENSE_TYPE_LABELS: replace with t('common:expenseTypes.hospitality_snack'), etc.
   - formatEventDates: "X jours" → t('common:dayCount', { count: dates.length })
   - Date formatting: switch date-fns locale based on i18n.language. Import `enUS` from 'date-fns/locale' alongside `fr`, then use: `i18n.language === 'en' ? enUS : fr`

4. **EventCreatePage.tsx** — `useTranslation('organizer')`:
   - "Nouvel evenement" → t('newEvent')
   - "Erreur lors de la creation..." → t('createEventError')

5. **EventForm.tsx** — `useTranslation('organizer')`:
   - All labels: "Titre de l'evenement" → t('eventTitle'), "Lieu" → t('location'), "Nom de l'organisateur" → t('organizerName'), "Email de l'organisateur" → t('organizerEmail'), "Type de depense" → t('expenseType')
   - Placeholder: "Selectionnez un type de depense" → t('selectExpenseType')
   - Other placeholders: "Reunion veterinaire..." → t('eventTitlePlaceholder')
   - "Dates de l'evenement" → t('eventDates')
   - "Creation en cours..." / "Creer l'evenement" → t('creating') / t('createEvent')
   - EXPENSE_TYPES labels: use t('common:expenseTypes.hospitality_snack'), etc.

6. **EventDetailPage.tsx** — `useTranslation('organizer')` (this is the largest component):
   - "Retour au tableau de bord" → t('backToDashboard')
   - "Événement introuvable" → t('eventNotFound')
   - "Organisateur:" → t('organizer')
   - statusLabels/statusColors: use t('common:statuses.*')
   - "Statut de l'événement" → t('eventStatus')
   - "Ouvrir l'événement" → t('openEvent')
   - "Finaliser l'événement" → t('finalizeEvent')
   - "Événement finalisé" → t('eventFinalizedLabel')
   - confirm dialog: "Finaliser cet événement ? Cette action est définitive." → t('finalizeConfirm')
   - "Génération..." / "Télécharger XLSX" → t('generating') / t('downloadXlsx')
   - "Échec du téléchargement, veuillez réessayer" → t('downloadError')
   - "QR Codes pour signature" → t('qrCodesTitle')
   - "Scannez ce code pour accéder à la page de signature" → t('scanQrHint')
   - "Participants" → t('participants')
   - "Rechercher dans le registre SIMV" → t('searchSimvRegistry')
   - "Ajouter un participant sans inscription" → t('addWalkIn')
   - Walk-in form labels: use t('common:*') for shared labels
   - "Sélectionner un type" → t('selectType')
   - "Ajouter" → t('common:add')
   - "Annuler" → t('common:cancel')
   - "Retirer ce participant de la liste ?" → t('removeParticipantConfirm')
   - "Présence en direct" → t('liveAttendance')
   - "Ouvrez l'événement pour voir la présence en direct" → t('openEventForAttendance')
   - "Erreur de connexion, veuillez réessayer" → t('connectionError')
   - beneficiaryTypeOptions labels: use t('common:beneficiaryTypes.*')
   - expenseTypeLabels: use t('common:expenseTypes.*')
   - Date formatting: use locale based on i18n.language

7. **DateSelector.tsx** — `useTranslation('organizer')`:
   - "Cliquez sur le calendrier pour selectionner des dates" → t('clickCalendar')
   - "Dates selectionnees :" → t('selectedDates')
   - Calendar locale: switch based on i18n.language. Import `enUS` from 'date-fns/locale'.

8. **ParticipantSearch.tsx** — `useTranslation('organizer')`:
   - "Rechercher dans le registre SIMV..." → t('searchSimv')
   - "Nom ou numéro d'inscription..." → t('searchPlaceholder')
   - "Recherche..." / "Aucun résultat" → t('common:searching') / t('noResults')
   - "Sans numéro" → t('noNumber')

9. **ParticipantTable.tsx** — `useTranslation('organizer')`:
   - Column headers: "Nom" → t('common:lastName'), "Prénom" → t('common:firstName'), etc.
   - beneficiaryTypeLabels: use t('common:beneficiaryTypes.*')
   - "N° d'inscription" → t('registrationNumber')
   - "Actions" → t('actions')
   - "Aucun participant pré-inscrit" → t('noParticipants')
   - Participant count: use t('common:participantCount', { count: data.length })

10. **AttendanceDashboard.tsx** — `useTranslation('organizer')`:
    - "Chargement de la présence..." → t('loadingAttendance')
    - "Erreur:" / "Erreur inconnue" → t('common:error') / t('common:unknownError')
    - "Aucune journée de présence" → t('noAttendanceDays')
    - "Mise à jour automatique" → t('autoUpdate')
    - "présents" (in "X / Y présents") → t('present')
    - "Signé" → t('signed')
    - "Aucune signature pour le moment" → t('noSignaturesYet')
    - Date formatting: switch locale based on i18n.language
  </action>
  <verify>
    - `cd /workspace/frontend && npx tsc --noEmit` passes
    - `grep -rn '"Brouillon"\|"Ouvert"\|"Finalisé"\|"Connexion"\|"Déconnexion"\|"Mes evenements"\|"Rechercher"\|"Présence en direct"' frontend/src/` returns no matches
    - Hardcoded French string audit: `grep -rn "\"[A-ZÀ-Ÿ][a-zà-ÿ]" frontend/src/pages/ frontend/src/components/ --include="*.tsx"` should only show brand name "c-sign" and dynamic content (event titles, user names), not UI labels
  </verify>
  <done>
    All organizer flow components use t() for every user-facing string. Zero hardcoded French UI labels remain. Date formatting uses locale based on i18n.language. Status labels, expense types, beneficiary types all translated via common namespace.
  </done>
</task>

</tasks>

<verification>
1. `cd /workspace/frontend && npx tsc --noEmit` — no TypeScript errors
2. Comprehensive grep for remaining French strings returns zero UI labels
3. Every component file imports useTranslation from react-i18next
4. Date formatting in all components uses locale based on i18n.language
</verification>

<success_criteria>
- Every user-facing string in every component comes from translation JSON files via t()
- Switching language in LanguageSwitcher updates all visible text without page reload
- Validation messages in Zod schemas use i18n.t() for current language
- Date formatting switches between French and English locales
- TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/05-platform-polish/05-02-SUMMARY.md`
</output>
