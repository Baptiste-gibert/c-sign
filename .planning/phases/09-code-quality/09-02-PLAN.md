---
phase: 09-code-quality
plan: 02
type: execute
wave: 2
depends_on: ["09-01"]
files_modified:
  - backend/src/**/*.ts
  - backend/src/**/*.tsx
  - backend/eslint.config.mjs
autonomous: true

must_haves:
  truths:
    - "ESLint reports zero errors across the entire codebase"
    - "All 26 explicit 'any' types are replaced with proper types"
    - "Import ordering is consistent across all files"
    - "No eslint-disable comments exist in the codebase"
  artifacts:
    - path: "backend/src/**/*.ts"
      provides: "Lint-clean TypeScript source files"
    - path: "backend/src/**/*.tsx"
      provides: "Lint-clean React component files"
  key_links:
    - from: "backend/eslint.config.mjs"
      to: "backend/src/**"
      via: "eslint . command"
      pattern: "npm run lint"
---

<objective>
Fix all ESLint violations across the entire codebase to reach zero errors. This includes auto-fixable issues (import sorting, prefer-const, etc.), manual fixes for 26 explicit `any` types, and careful review of React hooks exhaustive-deps fixes.

Purpose: Achieve the user's "zero errors" goal with strict enforcement — no disable comments, no warnings-only, every violation fixed.
Output: All source files lint-clean, `npm run lint` exits 0.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/09-code-quality/09-RESEARCH.md
@.planning/phases/09-code-quality/09-01-SUMMARY.md
@backend/eslint.config.mjs
@backend/tsconfig.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Auto-fix ESLint violations and fix remaining errors manually</name>
  <files>
    backend/src/**/*.ts
    backend/src/**/*.tsx
    backend/eslint.config.mjs
  </files>
  <action>
1. First, get a baseline count of all ESLint errors:
```bash
cd /workspace/backend && npx eslint . 2>&1 | tail -5
```
Note the total error count for the summary.

2. Run ESLint auto-fix to resolve all auto-fixable issues (import sorting, prefer-const, etc.):
```bash
cd /workspace/backend && npx eslint . --fix 2>&1 | tail -10
```

3. Re-run ESLint to see remaining errors that need manual fixes:
```bash
cd /workspace/backend && npx eslint . 2>&1
```

4. For each remaining error, fix manually following these rules:

**For `@typescript-eslint/no-explicit-any` errors (expect ~26):**
- Replace `any` with the correct specific type
- For Payload hook callbacks: use Payload's typed parameters (e.g., `CollectionBeforeChangeHook` from `payload`)
- For React event handlers: use proper React event types (e.g., `React.ChangeEvent<HTMLInputElement>`)
- For TanStack Query hooks: use generic type parameters (e.g., `useQuery<EventData>()`)
- For catch blocks: use `unknown` and narrow with type guards
- For genuinely untyped third-party APIs: use `unknown` with assertion, NOT `any`
- NEVER add `// eslint-disable` comments — the user explicitly forbids them

**For `react-hooks/exhaustive-deps` warnings:**
- CAREFULLY review each missing dependency
- If the dependency was intentionally omitted (e.g., to run effect only once), refactor to use useRef or useCallback to make intent explicit
- If the dependency was accidentally omitted, add it
- After EACH exhaustive-deps fix, verify the component logic makes sense (avoid infinite loops)
- Test: `npm run type-check` after all fixes to catch type regressions

**For import sorting errors:**
- These should all be auto-fixed by step 2. If any remain, manually reorder imports per simple-import-sort convention:
  1. External packages (react, next, etc.)
  2. Internal aliases (@/components, @/hooks, @/lib)
  3. Type imports (import type { ... })

**For other typescript-eslint/strict rules:**
- `@typescript-eslint/no-unnecessary-condition`: remove conditions that TypeScript proves are always true/false
- `@typescript-eslint/prefer-nullish-coalescing`: replace `||` with `??` where appropriate
- `@typescript-eslint/no-non-null-assertion`: replace `!` assertions with proper null checks
- Follow what the rule suggests, but verify it doesn't change behavior

5. If the ESLint config itself causes issues with Payload CMS generated files or config files, add ONLY file-level ignores in eslint.config.mjs (e.g., ignoring payload-types.ts which is auto-generated). File-level ignores in the config are acceptable; inline disable comments are NOT.

6. After all fixes, run the full quality pipeline:
```bash
cd /workspace/backend && npm run type-check && npm run lint && npm run format:check
```

All three must exit 0.

CRITICAL SAFETY: After fixing all violations, verify the app still starts:
```bash
cd /workspace/backend && timeout 30 npm run dev 2>&1 | head -20
```
If the dev server starts without errors, the fixes are safe. Kill it after verification.
  </action>
  <verify>
Run: `cd /workspace/backend && npm run lint` — must exit 0 with zero errors.
Run: `cd /workspace/backend && npm run type-check` — must exit 0.
Run: `cd /workspace/backend && npm run format:check` — must exit 0.
Run: `grep -r "eslint-disable" /workspace/backend/src/ | wc -l` — must be 0.
Run: `grep -r ": any" /workspace/backend/src/ --include="*.ts" --include="*.tsx" | grep -v node_modules | grep -v ".next" | wc -l` — should be 0 (or near-zero if some are in type-safe patterns).
  </verify>
  <done>ESLint reports zero errors. TypeScript compiles clean. No eslint-disable comments in codebase. All explicit `any` types replaced with proper types. `npm run quality` exits 0.</done>
</task>

</tasks>

<verification>
1. `cd /workspace/backend && npm run quality` exits 0 (type-check + lint + format:check all pass)
2. `grep -r "eslint-disable" /workspace/backend/src/` returns nothing
3. `grep -rn ": any[^A-Za-z]" /workspace/backend/src/ --include="*.ts" --include="*.tsx"` returns zero or near-zero results
4. Dev server starts without runtime errors
</verification>

<success_criteria>
- `npm run lint` exits 0 with zero errors on the entire codebase
- `npm run type-check` exits 0
- `npm run format:check` exits 0
- Zero eslint-disable comments in source code
- All 26 explicit `any` types replaced with proper types
- Application still builds and starts correctly
</success_criteria>

<output>
After completion, create `.planning/phases/09-code-quality/09-02-SUMMARY.md`
</output>
